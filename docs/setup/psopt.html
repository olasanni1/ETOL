<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ePSOPT Setup &mdash; ETOL  documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="eDymos Setup" href="dymos.html" />
    <link rel="prev" title="eOMPL Setup" href="ompl.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ETOL
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="setup.html">Setup</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">System Requirements</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="eSolver.html">Extensible Solvers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="glpk.html">eGLPK Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="gurobi.html">eGurobi Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="ompl.html">eOMPL Setup</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ePSOPT Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#windows-setup">Windows Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dymos.html">eDymos Setup</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../overview/build.html">Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/acknowledgement.html">Acknowledgements</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ETOL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="setup.html">Setup</a></li>
          <li class="breadcrumb-item"><a href="eSolver.html">Extensible Solvers</a></li>
      <li class="breadcrumb-item active">ePSOPT Setup</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/setup/psopt.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="epsopt-setup">
<span id="psopt-setup"></span><h1>ePSOPT Setup<a class="headerlink" href="#epsopt-setup" title="Permalink to this headline">¶</a></h1>
<p>Similar to ETOL, <a class="reference external" href="http://www.psopt.org/">PSOPT</a> is an open source software package that relies on open source packages. The library can be obtained at <a class="reference external" href="https://github.com/PSOPT/psopt">https://github.com/PSOPT/psopt</a>. It comes with an Ubuntu 18.04 install script, which also installs the prerequisite software packages. The library does not provide an install script for other operating systems, such as Windows. However, PSOPT has been successfully used on Windows with ePSOPT.</p>
<div class="section" id="windows-setup">
<h2>Windows Setup<a class="headerlink" href="#windows-setup" title="Permalink to this headline">¶</a></h2>
<p>Many packages need to be built from source. The primary packages are <a class="reference external" href="https://coin-or.github.io/Ipopt/index.html">IPOPT</a> and <a class="reference external" href="https://github.com/coin-or/ADOL-C">ADOL-C</a>. These two packages require additional open source packages too. The following steps provide instructions for building PSOPT and its dependencies on a Windows 10 machine.</p>
<ol class="arabic">
<li><p>If MSYS2 is not installed, complete the instructions in the <a class="reference internal" href="windows.html#windows"><span class="std std-ref">Windows Setup</span></a> section.</p></li>
<li><p>Install additional prerequisite software</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">unzip</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">openblas</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">lapack</span> \
<span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">suitesparse</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">metis</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">swig</span> \
<span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">readline</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">libgd</span>
</pre></div>
</div>
</li>
<li><p>Install ColPack with CMake.</p>
<ol class="loweralpha">
<li><p>Open a MSYS2 shell</p></li>
<li><p>Download Colpack</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">CSCsw</span><span class="o">/</span><span class="n">ColPack</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Edit the CMakeLists.txt file in ./ColPack/build/cmake. Replace “ColPack_headers” with “ColPack”. Replace “ColPack_libs” with “cmake/ColPack”. Delete “/shared_archive”, “/shared_library”, “/shared_runtime”, “/archive”, “/library”, and “/runtime”. Change “WIN32” to “MSVC”. Change the following lines</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>101    ${COLPACK_ROOT_DIR}/src/Recovery/*.cpp

170    $target_link_libraries(ColPack_shared PRIVATE ${OpenMP_C_LIBRARIES})
</pre></div>
</div>
</li>
<li><p>Change directory to ColPack’s build directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">ColPack</span><span class="o">/</span><span class="n">build</span>
</pre></div>
</div>
</li>
<li><p>Create a “mywork” directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">mywork</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="n">mywork</span>
</pre></div>
</div>
</li>
<li><p>Generate the build files</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">../</span><span class="n">cmake</span> <span class="o">-</span><span class="n">DCMAKE_INSTALL_PREFIX</span><span class="p">:</span><span class="n">PATH</span><span class="o">=/</span><span class="n">mingw64</span> <span class="o">-</span><span class="n">DENABLE_OPENMP</span><span class="o">=</span><span class="n">ON</span> <span class="o">-</span><span class="n">DENABLE_EXAMPLES</span><span class="o">=</span><span class="n">OFF</span> <span class="o">-</span><span class="n">G</span> <span class="s2">&quot;Unix Makefiles&quot;</span>
</pre></div>
</div>
</li>
<li><p>Build the files</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Install <a class="reference external" href="https://github.com/coin-or/ADOL-C">ADOL-C</a></p>
<ol class="loweralpha">
<li><p>Open a MSYS Shell</p></li>
<li><p>Download ADOL-C</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">coin</span><span class="o">-</span><span class="ow">or</span><span class="o">/</span><span class="n">ADOL</span><span class="o">-</span><span class="n">C</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Change directory to ADOL-C</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">ADOL</span><span class="o">-</span><span class="n">C</span>
</pre></div>
</div>
</li>
<li><p>Edit ./ADOL-C/swig/adolc-numpy-for.i. Change all “unsigned long” to “unsigned long long”</p></li>
<li><p>Edit ./configure.ac. On line 95, change “_lib=lib64” to “_lib=lib”.</p></li>
<li><p>Edit ./ADOL-C/swig/setup.py. Replace “lib64” to “lib”. Change line 193 to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libraries</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;adolc&#39;</span><span class="p">,</span><span class="s1">&#39;ColPack&#39;</span><span class="p">,</span><span class="s1">&#39;gomp&#39;</span><span class="p">],</span>
</pre></div>
</div>
</li>
<li><p>Run the following</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">autoreconf</span> <span class="o">-</span><span class="n">vfi</span>
</pre></div>
</div>
</li>
<li><p>Configure the build</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">mingw64</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">colpack</span><span class="o">=/</span><span class="n">mingw64</span> \
<span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">cflags</span><span class="o">=</span><span class="s2">&quot;-O3 -fPIC -std=c99 -Wall&quot;</span> \
<span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">cxxflags</span><span class="o">=</span><span class="s2">&quot;-O3 -std=c++11 -Wall -fPIC&quot;</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">sparse</span> \
<span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">boost</span><span class="o">-</span><span class="n">libdir</span><span class="o">=/</span><span class="n">mingw64</span><span class="o">/</span><span class="n">lib</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">ulong</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">static</span><span class="o">=</span><span class="n">yes</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">shared</span><span class="o">=</span><span class="n">no</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">openmp</span><span class="o">-</span><span class="n">flag</span><span class="o">=</span><span class="s2">&quot;-fopenmp&quot;</span>
</pre></div>
</div>
</li>
<li><p>Build and install</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Install a <a class="reference external" href="https://coin-or.github.io/Ipopt/INSTALL.html">IPOPT Linear Solver</a>. For example the <a class="reference external" href="http://www.hsl.rl.ac.uk/ipopt/">Harwell Subroutines Library</a> (HSL) was successfully used on Windows.</p></li>
<li><p>Install IPOPT such that it dynamically loads a linear solver</p>
<ol class="loweralpha">
<li><p>Open a MSYS2 Shell</p></li>
<li><p>Download Ipopt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">coin</span><span class="o">-</span><span class="ow">or</span><span class="o">/</span><span class="n">Ipopt</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Change directory to Ipopt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">Ipopt</span>
</pre></div>
</div>
</li>
<li><p>Modify it load such that it loads the installed linear solver’s dll. For example, if HSL is used, modify ./src/contrib/LinearSolverLoader/HSLLoader.c, by changing ‘#define HSLLIBNAME SHAREDEXT’ to ‘#define HSLLIBNAME “libhsl.dll”’</p></li>
<li><p>Make a build folder</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">build</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="n">build</span>
</pre></div>
</div>
</li>
<li><p>Configure the build</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">../</span><span class="n">configure</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">static</span><span class="o">=</span><span class="n">yes</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">shared</span><span class="o">=</span><span class="n">no</span> <span class="n">coin_skip_warn_cxxflags</span><span class="o">=</span><span class="n">yes</span> \
<span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">mumps</span><span class="o">=</span><span class="n">no</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">asl</span><span class="o">=</span><span class="n">no</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">hsl</span><span class="o">=</span><span class="n">no</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">mingw64</span> \
<span class="n">LDFLAGS</span><span class="o">=</span><span class="s2">&quot;-Wl,--no-as-needed -ldl&quot;</span>
</pre></div>
</div>
</li>
<li><p>Build Ipopt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>make -j $(($(nproc) - 1))
</pre></div>
</div>
</li>
<li><p>Install Ipopt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Install a PDFLib-Lite shared library based on <a class="reference external" href="http://www.davidgis.fr/documentation/Build_Prebuilt_Toolchain_MinGW-w64_for_Linux-32bits_GCC-7.2.0_Testing/#pdflib-lite-7-0-5p3">MinGW32 Linux Distro Notes</a></p>
<ol class="loweralpha">
<li><p>Open a MSYS2 shell</p></li>
<li><p>Download PDFLib-Lite</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Distrotech</span><span class="o">/</span><span class="n">PDFlib</span><span class="o">-</span><span class="n">Lite</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Change directory to PDFlib-Lite</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">PDFlib</span><span class="o">-</span><span class="n">Lite</span>
</pre></div>
</div>
</li>
<li><p>Edit ./libs/pdcore/pc_util.h by adding the following to line 25</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#undef isfinite</span>
</pre></div>
</div>
</li>
<li><p>Change line 23 in ./config/mkcommon.inc to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">EXE</span>             <span class="o">=</span>
</pre></div>
</div>
</li>
<li><p>Configure the build</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">mingw64</span> <span class="n">CFLAGS</span><span class="o">=</span><span class="s2">&quot;-DPDFLIB_EXPORTS&quot;</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span>
</pre></div>
</div>
</li>
<li><p>Build and install</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</li>
<li><p>Change directory to /mingw64/lib</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">mingw64</span><span class="o">/</span><span class="n">lib</span>
</pre></div>
</div>
</li>
<li><p>Create a shared Library</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span> <span class="o">-</span><span class="n">shared</span> <span class="o">-</span><span class="n">o</span> <span class="n">libpdf</span><span class="o">.</span><span class="n">dll</span> <span class="n">libpdf</span><span class="o">.</span><span class="n">a</span>
</pre></div>
</div>
</li>
<li><p>Create a gendef file</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gendef - libpdf.dll &gt; libpdf.def
</pre></div>
</div>
</li>
<li><p>Create a dll.a file</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dlltool -d libpdf.def -l libpdf.dll.a
</pre></div>
</div>
</li>
<li><p>Move the dll file to the mingw64/bin directory</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mv ./libpdf.dll ../bin
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Install PSOPT</p>
<ol class="loweralpha">
<li><p>Open a MSYS2 shell</p></li>
<li><p>Download PSOPT</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">PSOPT</span><span class="o">/</span><span class="n">psopt</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Change directory to PSOPT</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">psopt</span>
</pre></div>
</div>
</li>
<li><p>Download lusol into the PSOPT directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">--</span><span class="k">continue</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">stanford</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">group</span><span class="o">/</span><span class="n">SOL</span><span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">lusol</span><span class="o">/</span><span class="n">lusol</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
</li>
<li><p>Extract the lusol files</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unzip</span> <span class="o">./</span><span class="n">lusol</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
</li>
<li><p>Edit ./Makefile.</p>
<ol class="upperroman">
<li><p>Delete lines 194 and 186, which are for $(CXSPARSE).</p></li>
<li><p>Change the following lines</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>9     prefix = /mingw64
179   all: $(DMATRIX_LIBS) $(LUSOL_LIBS) $(PSOPT_LIBS)
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Edit ./dmatrix/lib/Makefile. Change the following lines</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>18    IPOPTINCDIR = ${prefix}/include/coin-or
27    CXX           = g++
28    CC            = gcc
29    CXXFLAGS      = -O0 -g -I$(SNOPTDIR)/cppsrc -I$(DMATRIXDIR)/include -I$(SNOPTDIR)/cppexamples -I$(PSOPTSRCDIR) -DLAPACK -DUNIX -DSPARSE_MATRIX -DUSE_SNOPT -DUSE_IPOPT -I$(CXSPARSE)/Include -I$(LUSOL) -I$(CXSPARSE)/../SuiteSparse_config -I$(IPOPTINCDIR) -fomit-frame-pointer -pipe -DNDEBUG -fPIC -DHAVE_MALLOC
</pre></div>
</div>
</li>
<li><p>Edit ./PSOPT/lib/Makefile. Change the following lines</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>16    prefix = /mingw64
18    IPOPTINCDIR = -I${prefix}/include/coin-or
27    CXX           = g++
28    CC            = gcc
29    CXXFLAGS      = -O0 -g -I${prefix}/include -I${prefix}/include/adolc -I$(DMATRIXDIR)/include -I$(SNOPTDIR)/cppexamples -I$(PSOPTSRCDIR) -DLAPACK -DWIN32 -DSPARSE_MATRIX -DUSE_IPOPT -I$(LUSOL) $(IPOPTINCDIR) -fomit-frame-pointer -pipe -DNDEBUG -fPIC -DHAVE_MALLOC -std=c++11  -DPSOPT_EXPORT
</pre></div>
</div>
</li>
<li><p>Edit plot.cxx and psopt.h in ./PSOPT/src, by replacing all instances of “const string&amp; title” to “const string title”.</p></li>
<li><p>Edit ./PSOPT/src/psopt.h.</p>
<ol class="arabic">
<li><p>Add to beginning of lines 1111 and 1113</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">__declspec</span><span class="p">(</span><span class="n">dllexport</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Replace lines 39 to 43 with</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifndef PSOPT_API</span>
<span class="cp">#ifdef WIN32</span>
<span class="cp">#ifdef PSOPT_EXPORT</span>
<span class="cp">#define PSOPT_API __declspec(dllexport)</span>
<span class="cp">#else</span>
<span class="cp">#define PSOPT_API __declspec(dllimport)</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Edit ./PSOPT/src/plot.h. Delete or comment out lines 61 to 65</p></li>
<li><p>Edit ./PSOPT/src/IPOPT_interface.cxx. Replace “WIN32” with “MSVC”.</p></li>
<li><p>Edit ./PSOPT/src/NLP_interface.cxx to use the installed IPOPT linear solver. A list of supported linear solver values are provided at <a class="reference external" href="https://coin-or.github.io/Ipopt/OPTIONS.html#OPT_Linear_Solver">https://coin-or.github.io/Ipopt/OPTIONS.html#OPT_Linear_Solver</a>. For example for HSL ma57, add the following to line 559</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">-&gt;</span><span class="n">Options</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">SetStringValue</span><span class="p">(</span><span class="s2">&quot;linear_solver&quot;</span><span class="p">,</span><span class="s2">&quot;ma57&quot;</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>Edit ./dmatrix/include/dmatrixv.h.</p>
<ol class="arabic">
<li><p>Change line 116 to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define DEC_THREAD __thread</span>
</pre></div>
</div>
</li>
<li><p>First delete any instance of “=NULL” and “= Null”.</p></li>
<li><p>Replace any instance of “ntype=0”  with “ntype”.</p></li>
<li><p>Between lines 1725 to 1832 replace:</p>
<ol class="loweralpha simple">
<li><p>“[]” with “[] = NULL”</p></li>
<li><p>“* U” with “* U = NULL”</p></li>
<li><p>“* V” with “* V = NULL”</p></li>
<li><p>“* rindx” with “* rindx = NULL”</p></li>
<li><p>“* cindx” with “* cindx = NULL”</p></li>
<li><p>“int ntype” with “int ntype = 0”</p></li>
</ol>
</li>
<li><p>Between lines 2443 to 2484, replace:</p>
<ol class="loweralpha simple">
<li><p>“[]” with “[] = NULL”</p></li>
<li><p>“* U” with “* U = NULL”</p></li>
<li><p>“* V” with “* V = NULL”</p></li>
</ol>
</li>
</ol>
</li>
<li><p>Build PSOPT</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make all
</pre></div>
</div>
</li>
<li><p>Create a PSOPT_HOME environment variable that point points the PSOPT root directory. For example, in bashrc, add the following line at the end of the file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PSOPT_HOME=/home/${USER}/psopt
</pre></div>
</div>
</li>
</ol>
</li>
</ol>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ompl.html" class="btn btn-neutral float-left" title="eOMPL Setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dymos.html" class="btn btn-neutral float-right" title="eDymos Setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Olatunde Sanni.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>